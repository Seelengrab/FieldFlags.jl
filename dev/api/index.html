<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API Reference · FieldFlags.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">FieldFlags.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">FieldFlags.jl Documentation</a></li><li><a class="tocitem" href="../examples/">Examples</a></li><li class="is-active"><a class="tocitem" href>API Reference</a><ul class="internal"><li><a class="tocitem" href="#Public-API"><span>Public API</span></a></li><li><a class="tocitem" href="#Internal-API"><span>Internal API</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API Reference</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Seelengrab/FieldFlags.jl/blob/main/docs/src/api.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API-Reference"><a class="docs-heading-anchor" href="#API-Reference">API Reference</a><a id="API-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#API-Reference" title="Permalink"></a></h1><h2 id="Public-API"><a class="docs-heading-anchor" href="#Public-API">Public API</a><a id="Public-API-1"></a><a class="docs-heading-anchor-permalink" href="#Public-API" title="Permalink"></a></h2><p>The following symbols are considered API for the purposes of semver.</p><h3 id="Macros"><a class="docs-heading-anchor" href="#Macros">Macros</a><a id="Macros-1"></a><a class="docs-heading-anchor-permalink" href="#Macros" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="FieldFlags.@bitflags" href="#FieldFlags.@bitflags"><code>FieldFlags.@bitflags</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@bitflags [mutable] struct MyFlags
    flagA
    flagB
    _ # padding
    flagC
end</code></pre><p>Construct a struct representing various boolean flags, stored in a compact format where each flag takes up a single bit. Field access gives a <code>Bool</code>, explicit padding can be declared by naming a field <code>_</code>. Field names (other than padding) need to be unique. The struct can optionally be marked <code>mutable</code>.</p><p>See also <a href="#FieldFlags.@bitfield"><code>@bitfield</code></a>.</p><div class="admonition is-warning"><header class="admonition-header">Struct size</header><div class="admonition-body"><p>Due to compiler limitations, the size of the resulting object will (currently) always be a multiple of 8 bits. The additional bits added due to this are considered padding and can not be relied on to exist. They may be removed in a future release without notice.</p></div></div><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; @bitflags mutable struct MyFlags
           flagA
           flagB
           _ # padding
           flagC
       end

julia&gt; flags = MyFlags(true, false, true)
MyFlags(flagA: true, flagB: false, flagC: true)

julia&gt; flags.flagA
true

julia&gt; flags.flagB
false

julia&gt; flags.flagB = true
true

julia&gt; flags.flagB
true

julia&gt; sizeof(flags)
1</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Seelengrab/FieldFlags.jl/blob/02c6a6fd12b0c2ce5e02d06bb13a98ad4e09016e/src/FieldFlags.jl#L522-L569">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FieldFlags.@bitfield" href="#FieldFlags.@bitfield"><code>FieldFlags.@bitfield</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@bitfield [mutable] struct MyBits
    a:2
    b:3
    _[:3] # padding; width is assumed 1 bit if the length is omitted
    c:1
end</code></pre><p>Construct a struct representing various fields, with their size specified in bits. The struct can optionally be marked <code>mutable</code>.</p><p>See also <a href="#FieldFlags.@bitflags"><code>@bitflags</code></a>.</p><p><strong>Extended Help</strong></p><p>The fields are stored in a compact format where each field only takes up the specified number of bits. Field access gives an unsigned integer, whose lower bits are the bits of the accessed field. The upper bits are zeroed. As a special case, fields with size <code>1</code> return a <code>Bool</code>. Explicit padding can be specified by naming a field <code>_</code>, with freely chosen width. Field names (other than padding) need to be unique. The specified number of bits must be <code>&gt;= 0</code>.</p><p>The order the fields are given in is the order the fields are stored in. The first field occupies the least significant bits, followed by the second field, up to the last field, which is stored in the most significant bits.</p><p>For example, the struct given above has this layout:</p><table><tr><th style="text-align: center">MSB</th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center"></th><th style="text-align: center">LSB</th></tr><tr><td style="text-align: center">c</td><td style="text-align: center">_</td><td style="text-align: center">_</td><td style="text-align: center">_</td><td style="text-align: center">b</td><td style="text-align: center">b</td><td style="text-align: center">b</td><td style="text-align: center">a</td><td style="text-align: center">a</td></tr></table><p>where <code>_</code> is padding, with undefined value.</p><p>The constructor created for structs defined with <code>@bitfield</code> takes any type in <code>Union{Int128, Int16, Int32, Int64, Int8, UInt128, UInt16, UInt32, UInt64, UInt8, Bool}</code> and converts it to the correct size by truncating the upper bits, before storing the truncated value in the object. This truncation also occurs when writing to a field of a mutable object.</p><div class="admonition is-warning"><header class="admonition-header">Struct size</header><div class="admonition-body"><p>Due to compiler limitations, the size of the resulting object will (currently) always be a multiple of 8 bits. The additional bits added due to this are considered padding and can not be relied on to exist. They may be removed in a future release without notice. If you need padding up to a given size, explicitly specify a trailing padding field.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Field type</header><div class="admonition-body"><p>As there are no variable sized integers in Julia, it is only guaranteed that the return type on field access is large enough to hold all bits required by that field. While currently field sizes larger than <code>1</code> return an <code>UInt</code>, this is in particular not guaranteed and may be changed in the future, so that e.g. a field of size <code>2</code> returns an <code>UInt8</code> instead.</p></div></div><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; @bitfield struct MyBits
           a:2
           b:3
           _:3 # padding
           c:1
       end

julia&gt; bits = MyBits(1,2,3)
MyBits(a: 0x1, b: 0x2, c: true)

julia&gt; bits.a
0x0000000000000001

julia&gt; bits.b
0x0000000000000002

julia&gt; bits.c
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Seelengrab/FieldFlags.jl/blob/02c6a6fd12b0c2ce5e02d06bb13a98ad4e09016e/src/FieldFlags.jl#L400-L472">source</a></section></article><h3 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h3><p>These functions are explicitly not exported, to prevent confusion with <code>Base.fieldoffset</code> and similar field and property related functions.</p><article class="docstring"><header><a class="docstring-binding" id="FieldFlags.propertyoffset" href="#FieldFlags.propertyoffset"><code>FieldFlags.propertyoffset</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">propertyoffset(::Type{T}, s::Symbol) -&gt; Int</code></pre><p>Gives the offset (in bits) the field <code>s</code> is placed at in objects of type <code>T</code>.</p><p>See also <a href="#FieldFlags.fieldsize"><code>FieldFlags.fieldsize</code></a>.</p><pre><code class="language-julia-repl hljs">julia&gt; @bitflags mutable struct MyFlags
           flagA
           _ # padding
           flagB
       end

julia&gt; FieldFlags.propertyoffset(MyFlags, :flagA)
0

julia&gt; FieldFlags.propertyoffset(MyFlags, :flagB)
2</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Seelengrab/FieldFlags.jl/blob/02c6a6fd12b0c2ce5e02d06bb13a98ad4e09016e/src/FieldFlags.jl#L5-L25">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FieldFlags.fieldsize" href="#FieldFlags.fieldsize"><code>FieldFlags.fieldsize</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">fieldsize(::Type{T}, s::Symbol) -&gt; Int</code></pre><p>Gives the size (in bits) the field <code>s</code> takes up in objects of type <code>T</code>.</p><p>See also <a href="#FieldFlags.propertyoffset"><code>FieldFlags.propertyoffset</code></a>.</p><pre><code class="language-julia-repl hljs">julia&gt; @bitfield mutable struct MyBits
           a:2
           _ # padding
           b:3
       end

julia&gt; FieldFlags.fieldsize(MyBits, :a)
2

julia&gt; FieldFlags.fieldsize(MyBits, :b)
3</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Seelengrab/FieldFlags.jl/blob/02c6a6fd12b0c2ce5e02d06bb13a98ad4e09016e/src/FieldFlags.jl#L28-L48">source</a></section></article><h3 id="Additional-Supported-API"><a class="docs-heading-anchor" href="#Additional-Supported-API">Additional Supported API</a><a id="Additional-Supported-API-1"></a><a class="docs-heading-anchor-permalink" href="#Additional-Supported-API" title="Permalink"></a></h3><p>These functions are listed because they are supported, but their docstrings can&#39;t be displayed without having an instance of a type created via <a href="#FieldFlags.@bitfield"><code>@bitfield</code></a> or <a href="#FieldFlags.@bitflags"><code>@bitflags</code></a>.</p><ul><li><code>Base.propertynames</code><ul><li>Gives a tuple of the properties given in the original expression given to <a href="#FieldFlags.@bitfield"><code>@bitfield</code></a> or <a href="#FieldFlags.@bitflags"><code>@bitflags</code></a>.</li></ul></li><li><code>convert(::T, x::Union{Bool, Base.BitInteger})</code><ul><li>Converts <code>x</code> to a <code>T</code>, originally created via the macros of this package. If the sizes don&#39;t match, <code>x</code> is either truncated or its bitrepresentation is zero-extended to fit the size of <code>T</code>.</li></ul></li></ul><h2 id="Internal-API"><a class="docs-heading-anchor" href="#Internal-API">Internal API</a><a id="Internal-API-1"></a><a class="docs-heading-anchor-permalink" href="#Internal-API" title="Permalink"></a></h2><p>The following symbols are NOT considered API for the purposes of semver. They are documented here as a useful reference, not as a statement of semver guarantees.</p><article class="docstring"><header><a class="docstring-binding" id="FieldFlags.bitflags" href="#FieldFlags.bitflags"><code>FieldFlags.bitflags</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">bitflags(::Expr)</code></pre><p>The given `Expr(:struct) has the following format</p><pre><code class="nohighlight hljs">struct MyFlags
    a
    b
    _
end</code></pre><p>which is turned into</p><pre><code class="nohighlight hljs">struct MyFlags
    a:1
    b:1
    _:1
end</code></pre><p>before being passed to <code>FieldFlags.bitfield</code>.</p><p>Some minimal expression filtering is performed.</p><p>See also <a href="#FieldFlags.@bitflags"><code>@bitflags</code></a>, <a href="#FieldFlags.@bitfield"><code>@bitfield</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Seelengrab/FieldFlags.jl/blob/02c6a6fd12b0c2ce5e02d06bb13a98ad4e09016e/src/FieldFlags.jl#L481-L505">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FieldFlags.bitfield" href="#FieldFlags.bitfield"><code>FieldFlags.bitfield</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">bitfield(expr::Expr)</code></pre><p>Takes an <code>Expr(:struct)</code> of the form</p><pre><code class="nohighlight hljs">struct MyStruct
    a:x
    b:y
    _
    _:z
end</code></pre><p>where <code>a</code>, <code>b</code> are potential field names, <code>x</code>, <code>y</code>, and <code>z</code> are desired bitwidths for those fields, <code>_</code> is padding and returns the following expression:</p><pre><code class="nohighlight hljs">quote
    $typedefs;
    $typefuncs;
    $conv;
    $propsize;
    $propoffset;
    $getprop;
    $setprop;
end</code></pre><p>Where <code>typedefs</code> are the new user-facing type definition and the internal type definitions, <code>typefuncs</code> are type related functions from Base for the new types, <code>conv</code> are <code>convert</code> methods to those types, <code>propsize</code> is the implementation for <a href="#FieldFlags.fieldsize"><code>FieldFlags.fieldsize</code></a>, <code>propoffset</code> is the implementation for <a href="#FieldFlags.propertyoffset"><code>FieldFlags.propertyoffset</code></a>, <code>getprop</code> is the definition for the <code>getproperty</code> overload for the user facing type and <code>setprop</code> is the definition for the <code>setproperty!</code> overloda for the user facing type.</p><p>See also <a href="#FieldFlags.bitflags"><code>FieldFlags.bitflags</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Seelengrab/FieldFlags.jl/blob/02c6a6fd12b0c2ce5e02d06bb13a98ad4e09016e/src/FieldFlags.jl#L97-L130">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FieldFlags.cast_extend_truncate" href="#FieldFlags.cast_extend_truncate"><code>FieldFlags.cast_extend_truncate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">cast_extend_truncate(T::DataType, x) -&gt; T</code></pre><p>Takes an object <code>x</code> of a primitive type and either bitcasts it to type <code>T</code> (if their sizes are egal), zero extends the bitrepresentation of <code>x</code> to the size of <code>T</code>, or truncates the bitrepresentation of <code>x</code> to <code>sizeof(T)</code>.</p><p>Returns a <code>T</code>.</p><p>See also <a href="#FieldFlags.cast_or_extend"><code>FieldFlags.cast_or_extend</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Seelengrab/FieldFlags.jl/blob/02c6a6fd12b0c2ce5e02d06bb13a98ad4e09016e/src/FieldFlags.jl#L70-L80">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FieldFlags.cast_or_extend" href="#FieldFlags.cast_or_extend"><code>FieldFlags.cast_or_extend</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">cast_or_extend(T::DataType, x) -&gt; T</code></pre><p>Takes an object <code>x</code> of a primitive type and either bitcasts it to <code>T</code> (if their sizes are egal) or zero-extends the bitrepresentation of <code>x</code> to the size of <code>T</code>. <code>sizeof(x) &lt;= sizeof(T)</code> must hold.</p><p>Returns a <code>T</code>.</p><p>See also <a href="#FieldFlags.cast_extend_truncate"><code>FieldFlags.cast_extend_truncate</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Seelengrab/FieldFlags.jl/blob/02c6a6fd12b0c2ce5e02d06bb13a98ad4e09016e/src/FieldFlags.jl#L51-L61">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../examples/">« Examples</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Saturday 3 June 2023 15:55">Saturday 3 June 2023</span>. Using Julia version 1.9.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
